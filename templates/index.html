{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h2 class="mb-2">Sketchy – Face Search Workflow</h2>
        <p class="text-muted mb-0">
            Sketchy is designed to take a <strong>sketch or photo of a face</strong> and use it as a
            query to search across <strong>stored photos</strong> and <strong>CCTV/video footage</strong>.
        </p>
        <p class="text-muted">
            This prototype shows the <em>user interface and flow</em>. The AI recognition backend will be plugged in later.
        </p>
    </div>
</div>

<div class="row g-4">
    <!-- STEP 1: Upload query face -->
    <div class="col-md-6">
        <div class="card shadow-sm h-100">
            <div class="card-body">
                <h5 class="card-title">Step 1 – Upload Sketch / Photo (Query Face)</h5>
                <p class="card-text text-muted">
                    Upload a <strong>facial sketch</strong> or <strong>photo</strong>. Sketchy will treat this
                    as the <em>query face</em> that you want to search for in:
                </p>
                <ul class="text-muted small mb-3">
                    <li>Existing suspect / reference photo database</li>
                    <li>CCTV or other recorded video footage</li>
                </ul>

                <form action="{{ url_for('search_image') }}" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="query_image" class="form-label">Choose Sketch / Photo</label>
                        <input
                            class="form-control"
                            type="file"
                            id="query_image"
                            name="query_image"
                            accept=".jpg,.jpeg,.png"
                            required
                        >
                    </div>
                    <button type="submit" class="btn btn-primary w-100">
                        Analyze Query Face (Photos Demo)
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- STEP 2: Upload CCTV / Video to scan for that face -->
    <div class="col-md-6">
        <div class="card shadow-sm h-100" id="video-section">
            <div class="card-body">
                <h5 class="card-title">Step 2 – Search for This Face in CCTV / Video</h5>
                <p class="card-text text-muted">
                    After selecting a query face in Step&nbsp;1, you can upload
                    <strong>CCTV or video footage</strong>. Sketchy will scan frames to flag
                    timestamps where the <em>same face</em> appears.
                </p>
                <p class="text-muted small">
                    In this preview, the system simulates what the results table will look like.
                    The real backend will use the uploaded sketch/photo to drive this search.
                </p>

                <form action="{{ url_for('search_video') }}" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="video_file" class="form-label">Choose CCTV / Video File</label>
                        <input
                            class="form-control"
                            type="file"
                            id="video_file"
                            name="video_file"
                            accept=".mp4,.avi,.mov,.mkv"
                            required
                        >
                    </div>
                    <button type="submit" class="btn btn-success w-100">
                        Scan Video for Query Face (Demo)
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
